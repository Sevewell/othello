version: '3'
services:
    engine1:
        build: ./engine
        ports: 
            - "8080:8080"
        volumes:
            - ./engine/www:/usr/src/app/www
            - ./cert:/usr/src/app/cert
        environment: 
            - CERT=${CERT}
            - SEARCH_NODE=${SEARCH_NODE}
            - PORT=8080
    engine2:
        build: ./engine
        ports: 
            - "8081:8081"
        volumes:
            - ./engine/www:/usr/src/app/www
            - ./cert:/usr/src/app/cert
        environment: 
            - CERT=${CERT}
            - SEARCH_NODE=${SEARCH_NODE}
            - PORT=8081
    interface:
        build: ./interface
        ports: 
            - "80:80"
            - "443:443"
        volumes: 
            - ./interface/www:/usr/src/app/www
            - ./cert:/usr/src/app/cert
        environment: 
            - CERT=${CERT}
